<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fragalysis API: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Fragalysis API
   &#160;<span id="projectnumber">1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Fragalysis API Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This API aims to allow any user to upload pdb files from the pdb or that they have created themselves, and analyse the ligand binding using the fragalysis webpage (<a href="https://fragalysis.diamond.ac.uk">https://fragalysis.diamond.ac.uk</a>).</p>
<p>To install with pip, you will need to install both pymol and rdkit separately, as these don't exist as pip packages.</p>
<p>To install fragalysis-api with pip:</p>
<div class="fragment"><div class="line">pip install -e .</div></div><!-- fragment --><ol type="1">
<li>Set up environment</li>
<li>Download PDB files and query the PDB for structures of the same protein bound to the same or different ligands</li>
<li>Submit PDB files - you will be given a query ID</li>
<li>Push your files into fragalysis and view them online :construction:</li>
<li>Analyse the binding of ligands to your target protein! :construction:</li>
</ol>
<p>Other functionalities that are available:</p><ul>
<li>Import pdb files directly through the API</li>
<li>Query the pdb for similar structures that also have ligands bound and have the option to import these structures</li>
</ul>
<ul>
<li>The pdb file shall not be greater than 5mb.</li>
<li>The pdb filename shall not contain non English language ascii characters and shall be between 4 and 20 characters in length.</li>
<li>Each pdb file for alignment shall contain the same number of chains.</li>
<li>All pdb files to be aligned must be in the same directory.</li>
<li>If manually selecting a file for reference it must be in the same director as all pdb files for alignment.</li>
<li>PDB file must abide by best practices set out at <a href="https://www.cgl.ucsf.edu/chimera/docs/UsersGuide/tutorials/pdbintro.html#note5">https://www.cgl.ucsf.edu/chimera/docs/UsersGuide/tutorials/pdbintro.html#note5</a></li>
<li>In PDB file, ligands must be referred to by same code in 'HET' lines in header and in 'HETATM' lines in main part of file</li>
</ul>
<p><a class="anchor" id="invalid"></a></p><h5>1. How to set install, update a fragalysis enviroment</h5>
<p>Starting out by initialising an environment and activating it. Clone the repository and cd to the relevant directory. Install pymol and rdkit via conda, and the other dependcies via the setup.py file:</p>
<div class="fragment"><div class="line">conda create -n fragalysis_env2 anaconda -y</div><div class="line">conda activate fragalysis_env2</div><div class="line">conda install -c schrodinger pymol -y</div><div class="line">conda install -c rdkit rdkit -y</div><div class="line">git clone &quot;https://github.com/xchem/fragalysis-api.git&quot;</div><div class="line">cd fragalysis-api/</div><div class="line">pip install -e .</div><div class="line">cd ..</div><div class="line">rm -rf fragalysis-api/</div></div><!-- fragment --><p>You can check if it has installed using: <code>conda list</code></p>
<p>Move to the fragalysis-api/xcimporter directory.</p>
<p>You will need two bits of information:</p><ol type="1">
<li>Your 'user ID' - this is your name followed by your protein name. For example, Anna looking at protein ATAD2 wil have username 'Anna_ATAD2'.</li>
<li>The PDB code you would like to download. For example, '6epu'.</li>
</ol>
<p>To download the PDB file</p>
<div class="fragment"><div class="line">python pdbimporter.py -id [user_id] -pdb [pdb code]</div></div><!-- fragment --><p>In our example, this would be: <code>python <a class="el" href="pdbimporter_8py_source.html">pdbimporter.py</a> -id Anna_ATAD2 -pdb 6epu</code></p>
<p>Alternatively, you can upload your own PDB files.</p>
<p>Note: you don't need to manually download a pdb file before querying the PDB for structures of the same protein</p>
<p>Similar to downloading PDB files, however initially all you need is the PDB code and the chain you would like to query. The command is</p>
<div class="fragment"><div class="line">python pdbquery.py -pdb [pdb code] -chain [required chain]</div></div><!-- fragment --><p>The API will then query the PDB for structures of the same protein that also have ligands bound. You will be asked if you would like to see a list of these structures and ligands, and if you would like to download all of these pdb files in bulk. If you choose to download these pdb files, you will be asked for your user id. This is as before: your name followed by the protein name (e.g. Anna_ATAD2).</p>
<p>Once you have the files downloaded, they need to be processed before they can be visualised in fragalysis. This is done using</p>
<div class="fragment"><div class="line">python xcimporter -id [user id] </div></div><!-- fragment --><p>Default directories are used. These can however be changed by using <code>-i [input directory]</code> or <code>-o [output directory]</code> if this is required.</p>
<p>The terminal will let you know when the conversion has been successful and if there are any files that have been found to be incompatible with the API. We are working to minimize any incompatibilities.</p>
<p>We are the 'Fragment 5', a group of students at the University of Oxford.</p>
<ul>
<li>Anna</li>
<li>Maranga</li>
<li>George (Joff Boff)</li>
<li>Tobias</li>
<li>Alister</li>
</ul>
<p>We are looked after by Rachael (Queen). </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>

This A\+PI aims to allow any user to upload pdb files from the pdb or that they have created themselves, and analyse the ligand binding using the fragalysis webpage (\href{https://fragalysis.diamond.ac.uk}{\tt https\+://fragalysis.\+diamond.\+ac.\+uk}).

To install with pip, you will need to install both pymol and rdkit separately, as these don\textquotesingle{}t exist as pip packages.

To install fragalysis-\/api with pip\+:


\begin{DoxyCode}
pip install -e .
\end{DoxyCode}



\begin{DoxyEnumerate}
\item Set up environment
\item Download P\+DB files and query the P\+DB for structures of the same protein bound to the same or different ligands
\item Submit P\+DB files -\/ you will be given a query ID
\item Push your files into fragalysis and view them online \+:construction\+:
\item Analyse the binding of ligands to your target protein! \+:construction\+:
\end{DoxyEnumerate}

Other functionalities that are available\+:
\begin{DoxyItemize}
\item Import pdb files directly through the A\+PI
\item Query the pdb for similar structures that also have ligands bound and have the option to import these structures
\end{DoxyItemize}


\begin{DoxyItemize}
\item The pdb file shall not be greater than 5mb.
\item The pdb filename shall not contain non English language ascii characters and shall be between 4 and 20 characters in length.
\item Each pdb file for alignment shall contain the same number of chains.
\item All pdb files to be aligned must be in the same directory.
\item If manually selecting a file for reference it must be in the same director as all pdb files for alignment.
\item P\+DB file must abide by best practices set out at \href{https://www.cgl.ucsf.edu/chimera/docs/UsersGuide/tutorials/pdbintro.html#note5}{\tt https\+://www.\+cgl.\+ucsf.\+edu/chimera/docs/\+Users\+Guide/tutorials/pdbintro.\+html\#note5}
\item In P\+DB file, ligands must be referred to by same code in \textquotesingle{}H\+ET\textquotesingle{} lines in header and in \textquotesingle{}H\+E\+T\+A\+TM\textquotesingle{} lines in main part of file
\end{DoxyItemize}

\label{invalid_invalid}%
\Hypertarget{invalid_invalid}%
\subparagraph*{1. How to set install, update a fragalysis enviroment}

Starting out by initialising an environment and activating it. Clone the repository and cd to the relevant directory. Install pymol and rdkit via conda, and the other dependcies via the setup.\+py file\+:


\begin{DoxyCode}
conda create -n fragalysis\_env2 anaconda -y
conda activate fragalysis\_env2
conda install -c schrodinger pymol -y
conda install -c rdkit rdkit -y
git clone "https://github.com/xchem/fragalysis-api.git"
cd fragalysis-api/
pip install -e .
cd ..
rm -rf fragalysis-api/
\end{DoxyCode}


You can check if it has installed using\+: {\ttfamily conda list}

Move to the fragalysis-\/api/xcimporter directory.

You will need two bits of information\+:
\begin{DoxyEnumerate}
\item Your \textquotesingle{}user ID\textquotesingle{} -\/ this is your name followed by your protein name. For example, Anna looking at protein A\+T\+A\+D2 wil have username \textquotesingle{}Anna\+\_\+\+A\+T\+A\+D2\textquotesingle{}.
\item The P\+DB code you would like to download. For example, \textquotesingle{}6epu\textquotesingle{}.
\end{DoxyEnumerate}

To download the P\+DB file


\begin{DoxyCode}
python pdbimporter.py -id [user\_id] -pdb [pdb code]
\end{DoxyCode}


In our example, this would be\+: {\ttfamily python \hyperlink{pdbimporter_8py}{pdbimporter.\+py} -\/id Anna\+\_\+\+A\+T\+A\+D2 -\/pdb 6epu}

Alternatively, you can upload your own P\+DB files.

Note\+: you don\textquotesingle{}t need to manually download a pdb file before querying the P\+DB for structures of the same protein

Similar to downloading P\+DB files, however initially all you need is the P\+DB code and the chain you would like to query. The command is


\begin{DoxyCode}
python pdbquery.py -pdb [pdb code] -chain [required chain]
\end{DoxyCode}


The A\+PI will then query the P\+DB for structures of the same protein that also have ligands bound. You will be asked if you would like to see a list of these structures and ligands, and if you would like to download all of these pdb files in bulk. If you choose to download these pdb files, you will be asked for your user id. This is as before\+: your name followed by the protein name (e.\+g. Anna\+\_\+\+A\+T\+A\+D2).

Once you have the files downloaded, they need to be processed before they can be visualised in fragalysis. This is done using


\begin{DoxyCode}
python xcimporter -id [user id] 
\end{DoxyCode}


Default directories are used. These can however be changed by using {\ttfamily -\/i \mbox{[}input directory\mbox{]}} or {\ttfamily -\/o \mbox{[}output directory\mbox{]}} if this is required.

The terminal will let you know when the conversion has been successful and if there are any files that have been found to be incompatible with the A\+PI. We are working to minimize any incompatibilities.

We are the \textquotesingle{}Fragment 5\textquotesingle{}, a group of students at the University of Oxford.


\begin{DoxyItemize}
\item Anna
\item Maranga
\item George (Joff Boff)
\item Tobias
\item Alister
\end{DoxyItemize}

We are looked after by Rachael (Queen). 
\hypertarget{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query}{}\section{fragalysis\+\_\+api.\+xcimporter.\+pdbquery.\+Query Class Reference}
\label{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query}\index{fragalysis\+\_\+api.\+xcimporter.\+pdbquery.\+Query@{fragalysis\+\_\+api.\+xcimporter.\+pdbquery.\+Query}}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \hyperlink{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a4c9143433e01d6c355246e1ea4f86265}{\+\_\+\+\_\+init\+\_\+\+\_\+} (self, pdb, chain)
\item 
def \hyperlink{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a0beef45de2126a3837b02050e1b90a74}{get\+\_\+matching\+\_\+proteins} (self)
\item 
def \hyperlink{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a846d2bc401e56a452222d95b630fb9b0}{get\+\_\+ligands} (self)
\item 
def \hyperlink{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a36dfa365ad219285d470107eba4e7080}{print\+\_\+number\+\_\+ligs} (self)
\item 
def \hyperlink{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_ada4ce4d98d911a33baabe42bf38a4aa1}{view\+\_\+ligands} (self)
\item 
def \hyperlink{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a42babe6a340aaf0b2dcc84ea5d0c0b11}{save\+\_\+dictionary} (self, user)
\item 
def \hyperlink{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a5be8d71963fc482622a0b1167636718c}{import\+\_\+pdbs} (self, user, \hyperlink{namespacefragalysis__api_1_1xcimporter_1_1pdbquery_a7e1833466eb7f1ed11f7bf148033aa2b}{out}=None)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_aa773c64b22dedb31eb01f3286a2e1a53}{pdb\+\_\+code}
\item 
\hyperlink{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a79cbf79b07436d26929d7576a5f687da}{chain\+\_\+id}
\item 
\hyperlink{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a14c73f40bf22f1b1e4388b9215307ee2}{similar}
\item 
\hyperlink{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a5162fe822deae38446960b3593b17aa5}{match\+\_\+ligs}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 10 of file pdbquery.\+py.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a4c9143433e01d6c355246e1ea4f86265}\label{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a4c9143433e01d6c355246e1ea4f86265}} 
\index{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}}
\subsubsection{\texorpdfstring{\+\_\+\+\_\+init\+\_\+\+\_\+()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def fragalysis\+\_\+api.\+xcimporter.\+pdbquery.\+Query.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{pdb,  }\item[{}]{chain }\end{DoxyParamCaption})}



Definition at line 11 of file pdbquery.\+py.


\begin{DoxyCode}
11     \textcolor{keyword}{def }\_\_init\_\_(self, pdb, chain):
12         self.pdb\_code = pdb
13         self.chain\_id = chain
14         self.similar = [self.pdb\_code]
15         self.match\_ligs = \{\}
16 
17 
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a846d2bc401e56a452222d95b630fb9b0}\label{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a846d2bc401e56a452222d95b630fb9b0}} 
\index{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}!get\+\_\+ligands@{get\+\_\+ligands}}
\index{get\+\_\+ligands@{get\+\_\+ligands}!fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}}
\subsubsection{\texorpdfstring{get\+\_\+ligands()}{get\_ligands()}}
{\footnotesize\ttfamily def fragalysis\+\_\+api.\+xcimporter.\+pdbquery.\+Query.\+get\+\_\+ligands (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 32 of file pdbquery.\+py.


\begin{DoxyCode}
32     \textcolor{keyword}{def }get\_ligands(self):
33 
34         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} self.similar:
35             ligands = get\_ligands(i)  \textcolor{comment}{# finds ligands bound to the protein in that particular pdb file}
36             \textcolor{keywordflow}{try}:
37                 \textcolor{keywordflow}{if} ligands[\textcolor{stringliteral}{'ligandInfo'}][\textcolor{stringliteral}{'ligand'}][0][\textcolor{stringliteral}{'@chemicalID'}] \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.match\_ligs:  \textcolor{comment}{# if ligand
       not already seen}
38                     self.match\_ligs[ligands[\textcolor{stringliteral}{'ligandInfo'}][\textcolor{stringliteral}{'ligand'}][0][\textcolor{stringliteral}{'@chemicalID'}]] = [i.lower()]   \textcolor{comment}{#
       save pdb code}
39                 \textcolor{keywordflow}{else}:
40                     self.match\_ligs[ligands[\textcolor{stringliteral}{'ligandInfo'}][\textcolor{stringliteral}{'ligand'}][0][\textcolor{stringliteral}{'@chemicalID'}]].append(i.lower())
41             \textcolor{keywordflow}{except} KeyError:
42                 \textcolor{keywordflow}{if} ligands[\textcolor{stringliteral}{'ligandInfo'}][\textcolor{stringliteral}{'ligand'}][\textcolor{stringliteral}{'@chemicalID'}] \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} self.match\_ligs:
43                     self.match\_ligs[ligands[\textcolor{stringliteral}{'ligandInfo'}][\textcolor{stringliteral}{'ligand'}][\textcolor{stringliteral}{'@chemicalID'}]] = [i.lower()]
44                 \textcolor{keywordflow}{else}:
45                     self.match\_ligs[ligands[\textcolor{stringliteral}{'ligandInfo'}][\textcolor{stringliteral}{'ligand'}][\textcolor{stringliteral}{'@chemicalID'}]].append(i.lower())
46             \textcolor{keywordflow}{except} TypeError:
47                 \textcolor{keywordflow}{pass}
48 
\end{DoxyCode}
\mbox{\Hypertarget{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a0beef45de2126a3837b02050e1b90a74}\label{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a0beef45de2126a3837b02050e1b90a74}} 
\index{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}!get\+\_\+matching\+\_\+proteins@{get\+\_\+matching\+\_\+proteins}}
\index{get\+\_\+matching\+\_\+proteins@{get\+\_\+matching\+\_\+proteins}!fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}}
\subsubsection{\texorpdfstring{get\+\_\+matching\+\_\+proteins()}{get\_matching\_proteins()}}
{\footnotesize\ttfamily def fragalysis\+\_\+api.\+xcimporter.\+pdbquery.\+Query.\+get\+\_\+matching\+\_\+proteins (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}queries the pdb for other files with similar protein structure but different ligands bound

params: pdb code, chain id
returns: prints list of pdb codes and ligands of similar protein structures, or saves this as a dictionary in a json file
\end{DoxyVerb}
 

Definition at line 18 of file pdbquery.\+py.


\begin{DoxyCode}
18     \textcolor{keyword}{def }get\_matching\_proteins(self):
19         \textcolor{stringliteral}{"""}
20 \textcolor{stringliteral}{        queries the pdb for other files with similar protein structure but different ligands bound}
21 \textcolor{stringliteral}{}
22 \textcolor{stringliteral}{        params: pdb code, chain id}
23 \textcolor{stringliteral}{        returns: prints list of pdb codes and ligands of similar protein structures, or saves this as a
       dictionary in a json file}
24 \textcolor{stringliteral}{        """}
25         result = get\_blast2(self.pdb\_code, chain\_id=self.chain\_id)
26         codes = result[0]
27         info = result[1]
28         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(len(codes)):
29             \textcolor{keywordflow}{if} \textcolor{stringliteral}{'100%'} \textcolor{keywordflow}{in} info[i].text:
30                 self.similar.append(codes[i])
31 
\end{DoxyCode}
\mbox{\Hypertarget{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a5be8d71963fc482622a0b1167636718c}\label{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a5be8d71963fc482622a0b1167636718c}} 
\index{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}!import\+\_\+pdbs@{import\+\_\+pdbs}}
\index{import\+\_\+pdbs@{import\+\_\+pdbs}!fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}}
\subsubsection{\texorpdfstring{import\+\_\+pdbs()}{import\_pdbs()}}
{\footnotesize\ttfamily def fragalysis\+\_\+api.\+xcimporter.\+pdbquery.\+Query.\+import\+\_\+pdbs (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{user,  }\item[{}]{out = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 69 of file pdbquery.\+py.


\begin{DoxyCode}
69     \textcolor{keyword}{def }import\_pdbs(self, user, out=None):
70         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} out:
71             data\_dir = os.path.join(\textcolor{stringliteral}{'..'}, \textcolor{stringliteral}{'..'}, \textcolor{stringliteral}{'data'}, \textcolor{stringliteral}{'xcimporter'}, \textcolor{stringliteral}{'input'})
72         \textcolor{keywordflow}{else}:
73             data\_dir = out
74         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} self.match\_ligs:
75             \textcolor{keywordflow}{for} j \textcolor{keywordflow}{in} self.match\_ligs[i]:
76                 initial = ImportPdb(data\_dir, user, j)
77                 initial.pdb\_importer()
78 
79 
\end{DoxyCode}
\mbox{\Hypertarget{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a36dfa365ad219285d470107eba4e7080}\label{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a36dfa365ad219285d470107eba4e7080}} 
\index{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}!print\+\_\+number\+\_\+ligs@{print\+\_\+number\+\_\+ligs}}
\index{print\+\_\+number\+\_\+ligs@{print\+\_\+number\+\_\+ligs}!fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}}
\subsubsection{\texorpdfstring{print\+\_\+number\+\_\+ligs()}{print\_number\_ligs()}}
{\footnotesize\ttfamily def fragalysis\+\_\+api.\+xcimporter.\+pdbquery.\+Query.\+print\+\_\+number\+\_\+ligs (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 49 of file pdbquery.\+py.


\begin{DoxyCode}
49     \textcolor{keyword}{def }print\_number\_ligs(self):
50         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} self.match\_ligs:
51             self.match\_ligs[i] = list(set(self.match\_ligs[i]))
52         print(len(self.match\_ligs)-1, \textcolor{stringliteral}{'different ligands have been found to bind to this protein'})
53         \textcolor{keywordflow}{return} len(self.match\_ligs)
54 
\end{DoxyCode}
\mbox{\Hypertarget{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a42babe6a340aaf0b2dcc84ea5d0c0b11}\label{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a42babe6a340aaf0b2dcc84ea5d0c0b11}} 
\index{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}!save\+\_\+dictionary@{save\+\_\+dictionary}}
\index{save\+\_\+dictionary@{save\+\_\+dictionary}!fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}}
\subsubsection{\texorpdfstring{save\+\_\+dictionary()}{save\_dictionary()}}
{\footnotesize\ttfamily def fragalysis\+\_\+api.\+xcimporter.\+pdbquery.\+Query.\+save\+\_\+dictionary (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{user }\end{DoxyParamCaption})}



Definition at line 60 of file pdbquery.\+py.


\begin{DoxyCode}
60     \textcolor{keyword}{def }save\_dictionary(self, user):
61         otherpath = os.path.abspath(os.path.join(\textcolor{stringliteral}{'..'}, \textcolor{stringliteral}{'..'}, \textcolor{stringliteral}{'data'}, \textcolor{stringliteral}{'xcimporter'}, \textcolor{stringliteral}{'other'}))
62         userpath = os.path.abspath(os.path.join(otherpath, user))
63         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.exists(otherpath):
64             os.makedirs(otherpath)
65         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.exists(os.path.join(userpath)):
66             os.mkdir(os.path.join(userpath))
67         json.dump(self.match\_ligs, open(os.path.join(userpath, self.pdb\_code+\textcolor{stringliteral}{'.json'}), \textcolor{stringliteral}{'w'}))
68 
\end{DoxyCode}
\mbox{\Hypertarget{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_ada4ce4d98d911a33baabe42bf38a4aa1}\label{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_ada4ce4d98d911a33baabe42bf38a4aa1}} 
\index{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}!view\+\_\+ligands@{view\+\_\+ligands}}
\index{view\+\_\+ligands@{view\+\_\+ligands}!fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}}
\subsubsection{\texorpdfstring{view\+\_\+ligands()}{view\_ligands()}}
{\footnotesize\ttfamily def fragalysis\+\_\+api.\+xcimporter.\+pdbquery.\+Query.\+view\+\_\+ligands (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 55 of file pdbquery.\+py.


\begin{DoxyCode}
55     \textcolor{keyword}{def }view\_ligands(self):
56         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} self.match\_ligs:
57             print(i, self.match\_ligs[i])
58         \textcolor{keywordflow}{return} len(self.match\_ligs)
59 
\end{DoxyCode}


\subsection{Member Data Documentation}
\mbox{\Hypertarget{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a79cbf79b07436d26929d7576a5f687da}\label{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a79cbf79b07436d26929d7576a5f687da}} 
\index{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}!chain\+\_\+id@{chain\+\_\+id}}
\index{chain\+\_\+id@{chain\+\_\+id}!fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}}
\subsubsection{\texorpdfstring{chain\+\_\+id}{chain\_id}}
{\footnotesize\ttfamily fragalysis\+\_\+api.\+xcimporter.\+pdbquery.\+Query.\+chain\+\_\+id}



Definition at line 13 of file pdbquery.\+py.

\mbox{\Hypertarget{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a5162fe822deae38446960b3593b17aa5}\label{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a5162fe822deae38446960b3593b17aa5}} 
\index{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}!match\+\_\+ligs@{match\+\_\+ligs}}
\index{match\+\_\+ligs@{match\+\_\+ligs}!fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}}
\subsubsection{\texorpdfstring{match\+\_\+ligs}{match\_ligs}}
{\footnotesize\ttfamily fragalysis\+\_\+api.\+xcimporter.\+pdbquery.\+Query.\+match\+\_\+ligs}



Definition at line 15 of file pdbquery.\+py.

\mbox{\Hypertarget{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_aa773c64b22dedb31eb01f3286a2e1a53}\label{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_aa773c64b22dedb31eb01f3286a2e1a53}} 
\index{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}!pdb\+\_\+code@{pdb\+\_\+code}}
\index{pdb\+\_\+code@{pdb\+\_\+code}!fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}}
\subsubsection{\texorpdfstring{pdb\+\_\+code}{pdb\_code}}
{\footnotesize\ttfamily fragalysis\+\_\+api.\+xcimporter.\+pdbquery.\+Query.\+pdb\+\_\+code}



Definition at line 12 of file pdbquery.\+py.

\mbox{\Hypertarget{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a14c73f40bf22f1b1e4388b9215307ee2}\label{classfragalysis__api_1_1xcimporter_1_1pdbquery_1_1_query_a14c73f40bf22f1b1e4388b9215307ee2}} 
\index{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}!similar@{similar}}
\index{similar@{similar}!fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query@{fragalysis\+\_\+api\+::xcimporter\+::pdbquery\+::\+Query}}
\subsubsection{\texorpdfstring{similar}{similar}}
{\footnotesize\ttfamily fragalysis\+\_\+api.\+xcimporter.\+pdbquery.\+Query.\+similar}



Definition at line 14 of file pdbquery.\+py.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
fragalysis\+\_\+api/xcimporter/\hyperlink{pdbquery_8py}{pdbquery.\+py}\end{DoxyCompactItemize}
